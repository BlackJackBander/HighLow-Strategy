Этот код на PineScript реализует стратегию торговли на основе индикатора ZigZag.

## Основная логика стратегии

**ZigZag индикатор** определяет значимые развороты цены:
- Ищет локальные максимумы и минимумы
- Фильтрует мелкие колебания с помощью порога `sigma`

**Торговая логика:**
- **Покупка**: при пробое минимума вниз (стоп-ордер на отскок)
- **Продажа**: при формировании нового восходящего движения после покупки

## Ключевые компоненты:

### Параметры:
- `sigma` (2%) - минимальный процент изменения для разворота
- `orderPercent` (3%) - процент ниже минимума для стоп-ордера на покупку

### Алгоритм работы:
1. **Определяет тренд** (вверх или вниз)
2. **Отслеживает экстремумы**: обновляет максимумы при восходящем движении и минимумы при нисходящем
3. **Фиксирует развороты** при изменении цены на заданный процент от экстремума
4. **Размещает ордера**: стоп-ордера на покупку от минимумов

### Визуализация:
- Красные метки и линии для вершин ZigZag
- Зеленые метки и линии для впадин
- Отображение текущих tmpMax и tmpMin на графике

### Торговые сигналы:
- **Вход**: покупает при отскоке от нового минимума

Пример на TradingView
- <img width="1877" height="961" alt="MSFT_2025-09-11_08-33-43" src="https://github.com/user-attachments/assets/24a7c605-ed96-4464-933e-f91cf8793933" />

- **Выход**: продает при формировании нового восходящего движения

Стратегия предназначена для捕捉 отскоков от значимых минимумов, определенных алгоритмом ZigZag.
